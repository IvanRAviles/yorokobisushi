<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yorokobi Sushi — Menú</title>
  <style>
    :root{
      --bg:#0b0b0d;
      --panel:#121216;
      --panel2:#16161c;
      --text:#f3f3f5;
      --muted:#b8b8c2;
      --red:#b3001b;
      --red2:#7a0012;
      --line:rgba(255,255,255,.08);
      --shadow: 0 10px 30px rgba(0,0,0,.55);
      --radius:18px;
      --radius2:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 400px at 20% 0%, rgba(179,0,27,.18), transparent 55%),
        radial-gradient(700px 300px at 85% 10%, rgba(179,0,27,.10), transparent 55%),
        var(--bg);
      color:var(--text);
    }

/* --- HEADER (MATCH INDEX) --- */
.topBar{
  padding:16px 18px;
  border-bottom:1px solid var(--line);
  background: rgba(0,0,0,.22);
  backdrop-filter: blur(10px);
}

.brandRow{
  display:flex;
  align-items:center;
  gap:12px;
}

.logoBox{
  width:54px;
  height:54px;
  border-radius:14px;
  background:#ffffff;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: var(--shadow);
  overflow:hidden;
  flex:0 0 auto;
}

.logoBox img{
  width:46px;
  height:46px;
  object-fit:contain;
  display:block;
}

.brandText{ display:flex; flex-direction:column; }
.brandName{ font-size:26px; font-weight:800; line-height:1.1; }
.brandSub{ margin-top:4px; color:var(--muted); font-size:13px; }




    .brand h1{margin:0; font-size:26px; line-height:1.1}
    .brand .sub{margin-top:4px; color:var(--muted); font-size:13px}

    .layout{
      max-width:1200px;
      margin:0 auto;
      padding:16px;
      display:grid;
      grid-template-columns: 260px 1fr 320px;
      gap:16px;
      align-items:start;
    }
    @media (max-width: 980px){
      .layout{grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardHeader{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--line);
      font-weight:800;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:13px;
    }
    .cardBody{padding:12px 14px 14px;}

    /* Sections list */
    .secBtn{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color:var(--text);
      cursor:pointer;
      text-align:left;
      font-weight:700;
      margin-bottom:10px;
    }
    .secBtn.active{
      border-color: rgba(179,0,27,.55);
      background: linear-gradient(180deg, rgba(179,0,27,.18), rgba(0,0,0,.18));
    }

    /* Menu middle */
    .search{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color:var(--text);
      outline:none;
      margin-bottom:12px;
    }
    .gallery{
      display:flex;
      gap:10px;
      overflow:auto;
      padding-bottom:6px;
      margin-bottom:12px;
    }
    .gallery img{
      height:92px;
      width:auto;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:#0e0e12;
      flex:0 0 auto;
    }

    .item{
      padding:12px 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      border-radius:16px;
      margin-bottom:12px;
    }
    .itemTop{
      display:flex; justify-content:space-between; gap:12px;
      align-items:flex-start;
    }
    .itemName{font-weight:900; line-height:1.2}
    .price{font-weight:900; color:#fff; opacity:.95; white-space:nowrap}
    .meta{color:var(--muted); font-size:13px; line-height:1.45; margin-top:6px}
    .warn{
      margin-top:8px;
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(179,0,27,.35);
      background: rgba(179,0,27,.10);
      color:#ffd7dd;
      font-size:13px;
      white-space:pre-line;
    }

    /* Right column */
    select{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color:var(--text);
      outline:none;
      margin-top:10px;
    }
    .waBtn{
      width:100%;
      margin-top:12px;
      border:none;
      border-radius:14px;
      padding:14px 14px;
      font-size:16px;
      font-weight:900;
      color:white;
      background: linear-gradient(180deg, var(--red), var(--red2));
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(179,0,27,.22);
    }
    .small{color:var(--muted); font-size:13px; line-height:1.5}
/* --- WhatsApp selection (simple) --- */
.orderSummary {
  margin-top: 12px;
  padding: 12px;
  border: 1px solid var(--line);
  border-radius: 14px;
  background: rgba(0,0,0,.25);
}

.orderSummary h3{
  margin: 0 0 8px 0;
  font-size: 13px;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: rgba(255,255,255,.85);
}

.orderList{
  display: grid;
  gap: 8px;
  margin: 0;
  padding: 0;
  list-style: none;
}

.orderItem{
  display:flex;
  justify-content: space-between;
  gap: 10px;
  padding: 10px;
  border-radius: 12px;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.06);
}

.orderItem .left{
  min-width: 0;
}
.orderItem .name{
  font-weight: 800;
  font-size: 13px;
  margin-bottom: 2px;
}
.orderItem .meta{
  font-size: 12px;
  color: var(--muted);
}

.orderItem .removeBtn{
  flex-shrink:0;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.9);
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
}

.addToOrderBtn{
  margin-top: 10px;
  width: 100%;
  border-radius: 14px;
  padding: 10px 12px;
  font-weight: 800;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.95);
  cursor: pointer;
}

.addToOrderBtn:hover{
  background: rgba(255,255,255,.10);
}
.addBtn{
  width:100%;
  margin-top:10px;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.06);
  color: var(--text);
  font-weight:800;
  cursor:pointer;
}
.addBtn:hover{ background: rgba(255,255,255,.10); }

.orderList{ margin-top:10px; display:flex; flex-direction:column; gap:8px; }
.orderItem{
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:10px 12px; border-radius:14px;
  background: rgba(0,0,0,.22); border:1px solid var(--line);
  font-size:14px;
}
.orderItem button{
  border:none; background:transparent; color: var(--muted);
  cursor:pointer; font-weight:900; font-size:16px;
}
    /* --- Customer fields, payment, service --- */
.custBox{
  margin-top:12px;
  padding-top:10px;
  border-top:1px solid var(--line);
}
.custLbl{
  display:block;
  font-size:12px;
  color:var(--muted);
  font-weight:800;
  margin-bottom:6px;
}
.custIn, .selBox{
  width:100%;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.02);
  color:var(--text);
  outline:none;
}
.custIn:focus, .selBox:focus{
  border-color:rgba(176,30,35,.65);
}
/* SOLO MENU MODE */
body.solo-menu .orderSummary,
body.solo-menu .custBox,
body.solo-menu .muted {
  display: none;
}
  </style>
</head>
<body class="solo-menu">

<header class="topBar">
  <div class="brandRow">
    <div class="logoBox">
      <img src="/assets/logo-mark.png" alt="Yorokobi Sushi">
    </div>
    <div class="brandText">
      <div class="brandName">Yorokobi Sushi</div>
      <div class="brandSub">Desde 2017</div>
    </div>
  </div>
</header>


  <div class="layout">
    <!-- Left: sections -->
    <div class="card">
      <div class="cardHeader">Secciones</div>
      <div class="cardBody" id="sections"></div>
    </div>

    <!-- Middle: menu -->
    <div class="card">
      <div class="cardHeader">Menú</div>
      <div class="cardBody">
        <input id="search" class="search" placeholder="Buscar en esta sección..." />
        <div id="gallery" class="gallery" aria-label="Galería"></div>
        <div id="items"></div>
        <div id="empty" class="small" style="display:none; padding-top:6px;">
          No se encontraron resultados.
        </div>
      </div>
    </div>

    <!-- Right: locations -->
    <div class="card">
      <div class="cardHeader">Sucursales</div>
      <div class="cardBody">
        <div class="small">Selecciona una sucursal para ordenar por WhatsApp.</div>
        <select id="loc" class="selBox"></select>
        <a class="waBtn" id="goOrder" href="/menu.html?loc=carranza">Ordenar por WhatsApp</a>
      </div>
    </div>
  </div>

<script>
// --- Menu SOLO (solo ver menu) ---
// This page shows the menu and redirects to the ordering screen.

const LOCATIONS = [
  { id:'carranza', name:'Sucursal Carranza' },
  { id:'anahuac', name:'Sucursal Anáhuac' },
  { id:'industrial', name:'Sucursal Industrial' }
];

async function main(){
  const locSel = document.getElementById('loc');
  const goOrder = document.getElementById('goOrder');

  // Fill locations
  LOCATIONS.forEach(l=>{
    const o=document.createElement('option');
    o.value=l.id; o.textContent=l.name;
    locSel.appendChild(o);
  });

  // Default branch
  locSel.value = 'carranza';
  const syncLink = () => { goOrder.href = `/menu.html?loc=${encodeURIComponent(locSel.value)}`; };
  syncLink();
  locSel.addEventListener('change', syncLink);

  // Load menu data
  const res = await fetch('/assets/data/menu.json', { cache: 'no-store' });
  if(!res.ok) throw new Error('menu.json not found');
  const data = await res.json();

  const sections = (data.sections || []).map(s => ({
    title: s.title,
    items: s.items || []
  }));

  // Elements
  const sectionsEl = document.getElementById('sections');
  const itemsEl = document.getElementById('items');
  const emptyEl = document.getElementById('empty');
  const search = document.getElementById('search');

  let currentTitle = sections[0]?.title || '';

  function renderSections(){
    sectionsEl.innerHTML = '';
    sections.forEach(s=>{
      const b=document.createElement('button');
      b.type='button';
      b.className='secBtn' + (s.title===currentTitle ? ' active' : '');
      b.textContent=s.title;
      b.onclick=()=>{ currentTitle=s.title; search.value=''; renderSections(); renderItems(); loadGallery(currentTitle); };
      sectionsEl.appendChild(b);
    });
  }

  async function loadGallery(title){
    const g=document.getElementById('gallery');
    if(!g) return;
    // Optional: images.json may exist; if not, just clear
    try{
      const r=await fetch('/assets/data/images.json', { cache:'no-store' });
      if(!r.ok){ g.innerHTML=''; return; }
      const imgs=await r.json();
      const list=(imgs[title]||[]);
      g.innerHTML = list.map(src=>`<img src="${src}" alt="${title}" loading="lazy" />`).join('');
    }catch{ g.innerHTML=''; }
  }

  function formatPrice(it){
    if(it.price) return it.price;
    return '';
  }

  function renderItems(){
    const q=(search.value||'').trim().toLowerCase();
    const sec = sections.find(x=>x.title===currentTitle);
    const list=(sec?.items||[]).filter(it=>{
      const hay=[it.name,it.ingredients,it.warning,(it.price||''),...(it.price_options||[]).map(p=>`${p.label} ${p.price}`)].join(' ').toLowerCase();
      return !q || hay.includes(q);
    });

    itemsEl.innerHTML='';
    emptyEl.style.display = list.length ? 'none' : 'block';

    list.forEach(it=>{
      const div=document.createElement('div');
      div.className='item';
      const priceText = it.price || (it.price_options && it.price_options.length ? '' : '');
      div.innerHTML = `
        <div class="itemTop">
          <div class="itemName">${it.name || ''}</div>
          <div class="price">${priceText}</div>
        </div>
        ${it.ingredients ? `<div class="meta"><b>Ingredientes:</b> ${it.ingredients}</div>` : ''}
        ${(it.price_options && it.price_options.length) ? `
          <div class="meta"><b>Opciones:</b><br>
            ${it.price_options.map(p=>`• ${p.label}: <b>${p.price}</b>`).join('<br>')}
          </div>` : ''}
        ${it.warning ? `<div class="warn">${it.warning}</div>` : ''}
      `;
      itemsEl.appendChild(div);
    });
  }

  search.addEventListener('input', renderItems);

  // Init
  renderSections();
  renderItems();
  if(currentTitle) loadGallery(currentTitle);
}

main().catch(err=>{
  console.error(err);
  alert('Error cargando el menú. Revisa que assets/data/menu.json exista.');
});
</script>

</body>
</html>

























